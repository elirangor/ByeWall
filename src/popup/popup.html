<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  
  <!-- Critical: Load dark mode script before anything else renders -->
  <link rel="preload" href="popup-early.js" as="script">
  <script src="popup-early.js"></script>
  
  <meta name="color-scheme" content="dark light">
  <title>Archive Article</title>

  <!-- Fonts (non-blocking, no inline onload) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link id="fontLink" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
    rel="stylesheet" media="print">

  <!-- Styles -->
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="header-container">
    <h3>Page Rewind ğŸ“°</h3>
    <div class="toggle-container">
      <label class="toggle-switch">
        <input type="checkbox" id="darkModeToggle">
        <span class="slider"></span>
      </label>
    </div>
  </div>

  <div class="options-section">
    <label>
      <input type="radio" id="archiveTodayRadio" name="archiveService" value="archiveToday" checked />
      Archive.Today
    </label>
    <label>
      <input type="radio" id="waybackRadio" name="archiveService" value="wayback" />
      Wayback Machine
    </label>
  </div>

  <button id="archive">Rewind This Page</button>

  <!-- History section - only shows when there is history -->
  <div id="history-section" style="margin-top: 12px; display: none;">
    <div class="history-header">
      <h4>Recently Viewed</h4>
      <button id="clearHistory" class="clear-history-btn">ğŸ—‘ï¸ Clear History</button>
    </div>
    <ul id="historyList" style="list-style-type: none; padding: 0; margin: 0;"></ul>
  </div>

  <!-- Tab behavior - moved below history section -->
  <div class="tab-behavior-section">
    <div class="tab-choice" id="tabChoice">
      <div class="tab-option" data-value="new">â• New Tab</div>
      <div class="tab-option" data-value="same">ğŸ”„ Same Tab</div>
    </div>
  </div>

  <!-- Modern keyboard shortcuts section -->
  <div class="shortcut-hint" id="shortcut-hint">
    <!-- Content will be dynamically generated by JavaScript -->
  </div>

  <div class="credit">
    Just a little something from
    <a href="https://www.linkedin.com/in/elirang/" target="_blank" rel="noopener noreferrer">Eliran</a> |
    <a href="https://github.com/elirangor/ByeWall" target="_blank" rel="noopener noreferrer">View on GitHub</a>
  </div>

  <div id="messageBox" class="message-box">
    <div class="message-box-content">
      <p id="messageText"></p>
      <div class="message-box-buttons">
        <button id="messageBoxClose">OK</button>
      </div>
    </div>
  </div>

  <script src="popup.js" type="module"></script>
</body>

</html>